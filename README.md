# umt
## 1.爬虫方案：
   -  工作日早高峰(8:00-9:00)进行一次爬虫，每次爬取4种交通方式的数据，存入data.json文件中
   -  起点和终点暂时定为以珠江新城为中心，半径5公里内随机采样150个起点，对于每个起点再随机生成150个终点，起点终点距离须大于1公里。共计22500pair。每个pair需要得到4种交通方式的路径规划数据，则需要至少发送22500*4=90 000次请求。
## 2.数据格式描述：
  在data.json中，存储的是一条条不同时间不同OD的数据，每一个数据都包含步行、公交、驾车、骑行4种交通方式的数据。
  每条数据中，"time"记录数据对应的时间，origin、destination是起点、终点的经纬度数据。walking_data、transit_data、driving_data、bicycling_data记录步行、公交、驾车、骑行4种交通方式的数据。
  数据提取自  [高德](https://lbs.amap.com/api/webservice/guide/api/direction)，整体是一个数组，以下对每一个数组元素的数据含义进行解释：

| 名称         |       |          |      |      | 含义                                                        |
| ------------ | ----- | -------- | ---- | ----------------------------------------------------------- | ------------ |
| time         |       |          |      |      | 当前数据对应的时刻                                          |
| origin       |       |          |      |      | 起点坐标                                                    |
| destination  |       |          |      |      | 终点坐标                                                    |
| walking_data |       |          |      |      | 步行路径规划数据                                            |
|              | paths |          |      |      | 步行方案，是一个数组，每个数组元素为一个方案                |
|              |       | distance |      |      | 此步行方案起点和终点的步行距离，单位：米                    |
|              |       | duration |      |      | 此步行方案步行时间预计，单位：秒                            |
|              |       | polyline |      |      | 此步行方案的轨迹，采样点之间用分号；隔开，规格：x1,y1;x2,y2 |
| bicycling_data |       |          |      |      | 骑行路径规划数据                                    |
|              | paths |          |      |      | 骑行路径规划方案，是一个数组，每个数组元素为一个方案      |
|              |       | distance |      |      | 此骑行方案起点和终点的骑行距离，单位：米                |
|              |       | duration |      |      | 此骑行方案的骑行时间，单位：秒                     |
|              |       | polyline |      |      | 此骑行方案的轨迹，采样点之间用分号；隔开，规格：x1,y1;x2,y2 |
| driving_data |       |          |      |      | 驾车路径规划数据                                    |
|              | paths |          |      |      | 驾车路径规划方案，是一个数组，每个数组元素为一个方案        |
|              |       | distance |      |      | 此驾车方案起点和终点的步行距离，单位：米                    |
|              |       | duration |      |      | 此驾车方案步行时间预计，单位：秒                            |
|              |       | polyline |      |      | 此驾车方案的轨迹，采样点之间用分号；隔开，规格：x1,y1;x2,y2 |
| transit_data |       |          |      |      | 公交路径规划数据 |
|              | transits | [[],[],[]] |      |      | 公交路径规划方案，是一个二维数组，每个数组元素为一个方案 |
|              |       | [] |      |      | 每个方案是一个一维数组，每个数组元素为此方案的一段路的公交换乘信息 |
|              |       | walking |      |      | 此路段步行导航信息 |
|              |       |          | origin |  | 起点坐标 |
|              |       |          | destination |  | 终点坐标 |
|              |       |          | distance |  | 步行距离 |
|              |       |          | duration |  | 步行预计时间 |
|              |       |          | polyline |  | 步行轨迹 |
|              |       | bus |      |      | 此路段公交导航信息，是一个一维数组，因为公交方案有时不只一个 |
|              |       |          | departure_stop |  | 此段起乘站信息 |
| | | |  | name | 站点名字 |
| | | |  | id | 站点id |
| | | |  | location | 站点经纬度 |
|              |       |          | arrival_stop |  | 此段下车站 |
| | | |  | name | 站点名字 |
| | | |  | id | 站点id |
| | | |  | location | 站点经纬度 |
|              |       |          | type |  | 公交类型，格式如：地铁线路 |
|              |       |          | duration |  | 公交预计行驶时间，单位：秒 |
|              |       |          | distance |  | 公交行驶距离，单位：米 |
|              |       |          | start_time |  | 首班车时间，格式如：0600，代表06：00 |
|              |       |          | end_time |  | 末班车时间，格式如：2300，代表23：00 |
|              |       |          | polyline |  | 此路段坐标集，格式为坐标串，如：116.481247,39.990704;116.481270,39.990726 |
|              |       | railway |      |      |                                                             |
|              |       |          | duration |  | 该线路车段耗时 |
|              |       |          | distance |  | 该换乘段的行车总距离 |
|              |       |          | departure_stop |  | 火车始发站信息 |
| | | |  | id | 上车站点ID |
| | | |  | name | 上车站点名称 |
| | | |  | location | 上车站点经纬度 |
| | | |  | adcode | 上车站点所在城市的adcode |
| | | |  | time | 上车点发车时间 |
| | | |  | start | 是否始发站，1表示为始发站，0表示非始发站 |
|              |       |          | arrival_stop |  | 火车到站信息 |
| | | |  | id | 下车站点ID |
| | | |  | name | 下车站点名称 |
| | | |  | location | 下车站点经纬度 |
| | | |  | adcode | 下车站点所在城市的adcode |
| | | |  | time | 到站时间，如大于24:00，则表示跨天 |
| | | |  | end      | 是否为终点站，1表示为终点站，0表示非终点站 |






## 3.遭遇问题
   小测一下，爬了31对od_pair的数据，文件大小已经达到了1.43MB，预计250000pair需要4.05GB左右。
## 4.后续安排
- 任务1：爬虫
- 任务2：已经爬取了一些样本。向另外2位同学介绍样本的数据格式和含义
- 任务3：开发一个前端，把这些OD以直线的形式都绘制在地图上
- 任务4：在上述前端的基础上，实现每条线可选择，选择某一条边后，以任何形式展示每条边的4个模式的路径和时长，同时让其他边变得透明（0.05）。
